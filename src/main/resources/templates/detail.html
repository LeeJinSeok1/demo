<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>회원 상세 페이지</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 40px;
      background-color: #f9f9f9;
    }
    .container {
      max-width: 600px;
      background: #fff;
      padding: 20px 30px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    h2 {
      text-align: center;
      color: #333;
    }
    .detail {
      margin-top: 20px;
    }
    .detail div {
      margin-bottom: 10px;
    }
    .label {
      font-weight: bold;
      color: #555;
    }
  </style>
  <script src="/jquery-3.7.0.min.js"></script>
</head>
<body>
<div class="container">
  <h2>회원 상세 정보</h2>
  <div class="detail">
    <div th:text="'이름:'+${member.name}"></div>
    <div th:text="'직업:'+${member.job}"></div>
    <div th:text="'나이:'+${member.age}"></div>
    <div th:if="${member.memberFileDTOList != null}">
      <a th:each="file : ${member.memberFileDTOList}"
         th:href="@{|/files/${file.serverFileName}|}"
         th:text="${file.originalFileName}"
         download>
      </a>
    </div>
  </div>
  <button onclick="goBack()">뒤로가기</button>
  <button type="button" th:onclick="'update('+${member.id}+')'">수정</button>
  <button type="button" th:onclick="'deleteData('+${member.id}+')'">삭제</button>
</div>

<script>
 function deleteData(id){
   if(confirm("해당 데이터를 삭제하시겠습니까?")){
     const formData = new FormData();
     formData.append("id",id);
     $.ajax({
         type: "DELETE",
         url: "/delete",
         data: formData,
         processData: false,
         contentType: false,
         success: function(response) {
           if(response === 'success'){
             alert("삭제완료");
             location.href="/";
           }else{
             alert("삭제 대상을 찾지못했습니다.")
             location.reload();
           }
         },
         error: function(response) {
           alert("err")
           location.reload();
         }
     });

   }
 }
  function update(id) {
   location.href="/savePage?id="+id;
  }
  function goBack() {
    window.history.back();
  }
</script>
</body>
</html>
